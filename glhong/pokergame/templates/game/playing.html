<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="http://localhost:3303/socket.io/socket.io.js"></script>
    <script src="/static/js/poker.js"></script>
</head>
<body>
    <!-- 사용자 이메일, 아이디 -->
    <input type="hidden" id="email" value="{{ email }}"/>
    <input type="hidden" id="id" value="{{ id }}"/>

    <div>
        <h3 id="notice">첫 배팅 금액을 입력 후 게임을 시작하세요.</h3>
    </div>
    <div>
        <h3 id="all_betting_money">0</h3>
    </div>

    <!-- 배팅 금액 입력 -->
    <form class="form-inline">
        <div class="form-group">
            <input type="text" class="form-control" id="betting_money" placeholder="배팅 금액">
        </div>
        <div class="form-group">
            <select id="betting_option" class="form-control" disabled>
                <option value="">배팅 옵션 선택</option>
                <option value="fold">fold</option>
                <option value="check">check</option>
{#                <option>call</option>#}
                <option value="raise">raise</option>
                <option value="all-in">all-in</option>
            </select>
        </div>
        <input type="button" id="betting_btn" class="btn btn-primary" value="Betting"/>
    </form>
    <div>
        <img id="user_card_1" src="" width="8%" height="auto"/>
        <img id="user_card_2" src="" width="8%" height="auto"/>
        <h2 id="user_result"></h2>
    </div>
    <div>
        <img id="server_card_1" src="/static/img/cards/back.png" width="8%" height="auto"/>
        <img id="server_card_2" src="/static/img/cards/back.png" width="8%" height="auto"/>
        <h2 id="server_result"></h2>
    </div>
    <div>
        <img id="community_card_1" src="/static/img/cards/back.png" width="8%" height="auto"/>
        <img id="community_card_2" src="/static/img/cards/back.png" width="8%" height="auto"/>
        <img id="community_card_3" src="/static/img/cards/back.png" width="8%" height="auto"/>
        <img id="community_card_4" src="/static/img/cards/back.png" width="8%" height="auto"/>
        <img id="community_card_5" src="/static/img/cards/back.png" width="8%" height="auto"/>
    </div>


</body>

<script>
    poker = new Poker(
        $('#email').val(),
        $('#id').val()
    );
    socket = io.connect('http://localhost:3303');
    // 서버로부터 값을 받아옴
    socket.on('from_dealer', function(data){
        poker.from_dealer(data);
    });


    $(document).ready(function(){
        $('#betting_btn').click(function(){
            var betting_money = $('#betting_money').val();
            var betting_option = $('#betting_option').val();
            if(poker.stage != 1 && betting_option === "") {
                alert("배팅 옵션을 선택해주세요!");
                return false;
            }
            if (betting_money === "" && (betting_option === "raise" || betting_option === "all-in" || betting_option === "")){
                alert("배팅 금액을 입력해주세요.");
                //
                // 사용자 소지 코인 비교문 작성
                //
                return false;
            }
            poker.to_dealer(betting_money, betting_option);
        });
    });

</script>
</html>